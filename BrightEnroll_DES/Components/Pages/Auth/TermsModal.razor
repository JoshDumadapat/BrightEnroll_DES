@if (Show)
{
    <div class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4" @onclick="Close">
        <div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col" @onclick:stopPropagation="true">
            <!-- Modal Header -->
            <div class="bg-blue-600 text-white px-6 py-4 flex justify-between items-center">
                <h2 class="text-lg sm:text-xl font-semibold">Terms of Enrollment and Privacy Policy</h2>
                <button @onclick="Close" class="text-white hover:text-gray-200 transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            
            <!-- Modal Content -->
            <div class="overflow-y-auto flex-1 px-6 py-6">
                <!-- Terms of Enrollment -->
                <div class="mb-8">
                    <h3 class="text-lg sm:text-xl font-bold text-blue-600 mb-4">Terms of Enrollment</h3>
                    <div class="space-y-4 text-sm sm:text-base text-gray-700">
                        <p>
                            By enrolling your child in BrightEnroll Elementary School, you acknowledge and agree to the following terms and conditions:
                        </p>
                        
                        <div>
                            <h4 class="font-semibold text-gray-900 mb-2">1. Enrollment Requirements</h4>
                            <ul class="list-disc list-inside ml-4 space-y-1">
                                <li>All required documents must be submitted accurately and completely</li>
                                <li>PSA Birth Certificate is mandatory for enrollment</li>
                                <li>Previous school records (for transferees and returnees) must be provided</li>
                                <li>Medical records and immunization certificates may be required</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-900 mb-2">2. Student Information Accuracy</h4>
                            <p>
                                Parents/Guardians are responsible for providing accurate and truthful information about the student. 
                                Any false or misleading information may result in the cancellation of enrollment.
                            </p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-900 mb-2">3. Academic Policies</h4>
                            <ul class="list-disc list-inside ml-4 space-y-1">
                                <li>Students must comply with the school's academic standards and requirements</li>
                                <li>Regular attendance is mandatory for all enrolled students</li>
                                <li>Parents/Guardians must support their child's educational progress</li>
                                <li>School rules and regulations must be followed at all times</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-900 mb-2">4. Financial Obligations</h4>
                            <p>
                                Tuition fees and other school-related expenses must be paid according to the school's payment schedule. 
                                Failure to meet financial obligations may affect the student's enrollment status.
                            </p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-900 mb-2">5. Withdrawal and Transfer</h4>
                            <p>
                                Parents/Guardians must provide written notice for student withdrawal or transfer. 
                                All outstanding fees must be settled before the release of student records.
                            </p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-900 mb-2">6. Code of Conduct</h4>
                            <p>
                                Students are expected to maintain appropriate behavior and respect for teachers, staff, and fellow students. 
                                Violations of the code of conduct may result in disciplinary action.
                            </p>
                        </div>
                    </div>
                </div>
                
                <hr class="border-gray-300 my-8" />
                
                <!-- Privacy Policy -->
                <div>
                    <h3 class="text-lg sm:text-xl font-bold text-blue-600 mb-4">Privacy Policy</h3>
                    <div class="space-y-4 text-sm sm:text-base text-gray-700">
                        <p>
                            BrightEnroll Elementary School is committed to protecting the privacy and confidentiality of student and family information. 
                            This policy outlines how we collect, use, store, and protect personal data.
                        </p>
                        
                        <div>
                            <h4 class="font-semibold text-gray-900 mb-2">1. Information We Collect</h4>
                            <p>We collect the following types of information:</p>
                            <ul class="list-disc list-inside ml-4 space-y-1 mt-2">
                                <li>Personal identification information (name, birth date, address, contact details)</li>
                                <li>Academic records and educational history</li>
                                <li>Medical and health information relevant to student care</li>
                                <li>Guardian and family information</li>
                                <li>Financial information for billing purposes</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-900 mb-2">2. How We Use Your Information</h4>
                            <p>We use collected information for the following purposes:</p>
                            <ul class="list-disc list-inside ml-4 space-y-1 mt-2">
                                <li>Processing and managing student enrollment</li>
                                <li>Maintaining academic records and progress tracking</li>
                                <li>Communicating with parents/guardians about student progress and school activities</li>
                                <li>Ensuring student safety and well-being</li>
                                <li>Complying with legal and regulatory requirements</li>
                                <li>Processing payments and managing financial records</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-900 mb-2">3. Data Protection and Security</h4>
                            <p>
                                We implement appropriate technical and organizational measures to protect personal data against unauthorized access, 
                                alteration, disclosure, or destruction. Access to personal information is restricted to authorized personnel only.
                            </p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-900 mb-2">4. Data Sharing and Disclosure</h4>
                            <p>
                                We do not sell or rent personal information to third parties. We may share information only in the following circumstances:
                            </p>
                            <ul class="list-disc list-inside ml-4 space-y-1 mt-2">
                                <li>With government agencies as required by law (e.g., Department of Education)</li>
                                <li>With authorized school personnel for educational purposes</li>
                                <li>In emergency situations to ensure student safety</li>
                                <li>With your explicit consent for specific purposes</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-900 mb-2">5. Data Retention</h4>
                            <p>
                                We retain student records in accordance with legal requirements and educational best practices. 
                                Records may be kept for the duration of enrollment and for a reasonable period thereafter as required by law.
                            </p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-900 mb-2">6. Your Rights</h4>
                            <p>You have the right to:</p>
                            <ul class="list-disc list-inside ml-4 space-y-1 mt-2">
                                <li>Access and review your child's personal information</li>
                                <li>Request corrections to inaccurate or incomplete data</li>
                                <li>Request information about how data is being used</li>
                                <li>File a complaint regarding data handling practices</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-900 mb-2">7. Consent</h4>
                            <p>
                                By submitting this enrollment form, you consent to the collection, processing, and storage of personal information 
                                as described in this Privacy Policy. You may withdraw consent at any time, subject to legal and contractual restrictions.
                            </p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-900 mb-2">8. Contact Information</h4>
                            <p>
                                For questions or concerns regarding this Privacy Policy or data handling practices, 
                                please contact BrightEnroll Elementary School administration.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Modal Footer -->
            <div class="bg-gray-50 px-6 py-4 flex justify-end border-t border-gray-200">
                <button @onclick="HandleUnderstand" 
                    class="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-full transition-colors">
                    I Understand
                </button>
            </div>
        </div>
    </div>
}

@code {
    [Parameter]
    public bool Show { get; set; }

    [Parameter]
    public EventCallback OnClose { get; set; }

    [Parameter]
    public EventCallback OnUnderstand { get; set; }

    private async Task HandleUnderstand()
    {
        // Call the OnUnderstand callback to check the checkbox
        if (OnUnderstand.HasDelegate)
        {
            await OnUnderstand.InvokeAsync();
        }
        // Then close the modal
        await Close();
    }

    private async Task Close()
    {
        await OnClose.InvokeAsync();
    }
}

