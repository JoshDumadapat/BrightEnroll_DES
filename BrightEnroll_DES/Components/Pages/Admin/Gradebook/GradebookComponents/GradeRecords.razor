@namespace BrightEnroll_DES.Components.Pages.Admin.Gradebook.GradebookComponents

<div class="p-6">
    <!-- Filters -->
    <div class="mb-6 border-b border-gray-200 px-3 py-4 sm:px-6">
        <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
            <div class="flex flex-col gap-3 sm:flex-row sm:items-center">
                <div class="relative flex w-full items-center sm:w-auto sm:min-w-[200px]">
                    <span class="absolute left-4 flex items-center justify-center">
                        <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </span>
                    <input type="text" placeholder="Search student..."
                           class="w-full rounded-lg border border-gray-300 py-2 pl-11 pr-4 text-sm text-gray-700 outline-none focus:border-gray-300 focus:ring-2 focus:ring-blue-400" />
                </div>
                <select class="w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-600 outline-none focus:border-gray-300 focus:ring-2 focus:ring-blue-400 sm:w-auto">
                    <option value="">All Sections</option>
                    <option value="Saturn">Saturn</option>
                    <option value="Rizal">Rizal</option>
                </select>
                <select class="w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-600 outline-none focus:border-gray-300 focus:ring-2 focus:ring-blue-400 sm:w-auto">
                    <option value="">All Subjects</option>
                    <option value="Math">Mathematics</option>
                    <option value="English">English</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Table -->
    <div class="overflow-x-auto">
        <table class="min-w-full text-sm">
            <thead class="bg-gray-100 font-semibold text-gray-600">
                <tr>
                    <th class="px-4 py-3 text-left">Student ID</th>
                    <th class="px-4 py-3 text-left">Name</th>
                    <th class="px-4 py-3 text-left">Section</th>
                    <th class="px-4 py-3 text-center">Q1</th>
                    <th class="px-4 py-3 text-center">Q2</th>
                    <th class="px-4 py-3 text-center">Q3</th>
                    <th class="px-4 py-3 text-center">Q4</th>
                    <th class="px-4 py-3 text-center">Final</th>
                    <th class="px-4 py-3 text-center">Actions</th>
                </tr>
            </thead>
            <tbody class="divide-y">
                @foreach (var record in gradeRecords)
                {
                    <tr class="transition hover:bg-gray-50">
                        <td class="px-4 py-3">@record.StudentId</td>
                        <td class="px-4 py-3">@record.Name</td>
                        <td class="px-4 py-3">@record.Section</td>
                        <td class="px-4 py-3 text-center font-semibold">@record.Q1.ToString("F2")</td>
                        <td class="px-4 py-3 text-center font-semibold">@record.Q2.ToString("F2")</td>
                        <td class="px-4 py-3 text-center font-semibold">@record.Q3.ToString("F2")</td>
                        <td class="px-4 py-3 text-center font-semibold">@record.Q4.ToString("F2")</td>
                        <td class="px-4 py-3 text-center font-bold text-blue-600">@record.Final.ToString("F2")</td>
                        <td class="flex items-center justify-center gap-2 px-4 py-3">
                            <button class="flex items-center gap-1.5 rounded-lg bg-blue-50 px-3 py-1.5 text-xs font-medium text-blue-400 transition-colors hover:bg-blue-100">
                                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                                </svg>
                                View
                            </button>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <!-- Footer -->
    <div class="flex items-center justify-between bg-gray-50 px-4 py-3 text-sm text-gray-600">
        <span>Showing @gradeRecords.Count records</span>
        <div class="flex items-center gap-2">
            <button class="rounded-md bg-blue-900 px-3 py-1 text-xs text-white">1</button>
            <button class="rounded-md px-3 py-1 text-xs text-gray-600 hover:bg-gray-200">2</button>
        </div>
    </div>
</div>

@code {
    private List<GradeRecord> gradeRecords = new();

    private class GradeRecord
    {
        public string StudentId { get; set; } = "";
        public string Name { get; set; } = "";
        public string Section { get; set; } = "";
        public decimal Q1 { get; set; }
        public decimal Q2 { get; set; }
        public decimal Q3 { get; set; }
        public decimal Q4 { get; set; }
        public decimal Final => (Q1 + Q2 + Q3 + Q4) / 4;
    }

    protected override void OnInitialized()
    {
        // TODO: Load grade records from database
        gradeRecords = new List<GradeRecord>
        {
            new() { StudentId = "ST001", Name = "Juan Dela Cruz", Section = "Saturn", Q1 = 88.5m, Q2 = 90.0m, Q3 = 87.5m, Q4 = 89.0m },
            new() { StudentId = "ST002", Name = "Maria Santos", Section = "Saturn", Q1 = 92.0m, Q2 = 94.5m, Q3 = 91.5m, Q4 = 93.0m },
            new() { StudentId = "ST003", Name = "Pedro Garcia", Section = "Saturn", Q1 = 81.0m, Q2 = 83.5m, Q3 = 80.0m, Q4 = 82.5m },
        };
    }
}

