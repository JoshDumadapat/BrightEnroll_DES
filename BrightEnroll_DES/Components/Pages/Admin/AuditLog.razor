@page "/audit-log"
@layout Components.Layout.MainLayout
@using BrightEnroll_DES.Components.Pages.Admin.AuditLogComponents

<PageTitle>Audit Log</PageTitle>

<div class="text-gray-800">
    <h1 class="mb-6 text-2xl font-bold text-gray-800">Audit Log</h1>
    
    <!-- Card Container -->
    <div class="overflow-hidden rounded-xl bg-white shadow">
        <AuditLogTable Logs="AuditLogs" RowsPerPage="RowsPerPage" />
    </div>
</div>

@code {
    private int RowsPerPage { get; set; } = 10;

    private List<AuditLogEntry> AuditLogs = new()
    {
        new() { Id = "LOG-00001", Timestamp = DateTime.Now.AddMinutes(-5), User = "Admin User", Role = "Administrator", Action = "User Login", Module = "Authentication", Description = "User successfully logged into the system", IpAddress = "192.168.1.100", Status = "Success" },
        new() { Id = "LOG-00002", Timestamp = DateTime.Now.AddMinutes(-10), User = "Mrs. Santos", Role = "Teacher", Action = "View Student Record", Module = "Student Record", Description = "Viewed student record for Christine Brooks (ID: 00001)", IpAddress = "192.168.1.101", Status = "Success" },
        new() { Id = "LOG-00003", Timestamp = DateTime.Now.AddMinutes(-15), User = "Admin User", Role = "Administrator", Action = "Create Employee", Module = "Human Resource", Description = "Added new employee: Mr. Dela Rosa", IpAddress = "192.168.1.100", Status = "Success" },
        new() { Id = "LOG-00004", Timestamp = DateTime.Now.AddMinutes(-20), User = "Registrar User", Role = "Registrar", Action = "Update Enrollment", Module = "Enrollment", Description = "Updated enrollment status for student ID: 00005", IpAddress = "192.168.1.102", Status = "Success" },
        new() { Id = "LOG-00005", Timestamp = DateTime.Now.AddMinutes(-25), User = "Cashier User", Role = "Cashier", Action = "Process Payment", Module = "Finance", Description = "Processed payment of Php 5,000.00 for student ID: 547635", IpAddress = "192.168.1.103", Status = "Success" },
        new() { Id = "LOG-00006", Timestamp = DateTime.Now.AddMinutes(-30), User = "Admin User", Role = "Administrator", Action = "Failed Login Attempt", Module = "Authentication", Description = "Failed login attempt with username: testuser", IpAddress = "192.168.1.150", Status = "Failed" },
        new() { Id = "LOG-00007", Timestamp = DateTime.Now.AddMinutes(-35), User = "Mrs. Santos", Role = "Teacher", Action = "Update Grade", Module = "Academics", Description = "Updated grades for student ID: 00003 in Mathematics", IpAddress = "192.168.1.101", Status = "Success" },
        new() { Id = "LOG-00008", Timestamp = DateTime.Now.AddMinutes(-40), User = "Admin User", Role = "Administrator", Action = "Archive Student", Module = "Archive", Description = "Archived student record: Rosie Pearson (ID: 00002)", IpAddress = "192.168.1.100", Status = "Success" },
        new() { Id = "LOG-00009", Timestamp = DateTime.Now.AddMinutes(-45), User = "Registrar User", Role = "Registrar", Action = "Document Verification", Module = "Enrollment", Description = "Verified documents for student ID: 00007", IpAddress = "192.168.1.102", Status = "Success" },
        new() { Id = "LOG-00010", Timestamp = DateTime.Now.AddMinutes(-50), User = "Admin User", Role = "Administrator", Action = "System Settings Change", Module = "Settings", Description = "Updated school year settings to 2024-2025", IpAddress = "192.168.1.100", Status = "Success" },
        new() { Id = "LOG-00011", Timestamp = DateTime.Now.AddMinutes(-55), User = "Cashier User", Role = "Cashier", Action = "Export Report", Module = "Finance", Description = "Exported payment records report for January 2025", IpAddress = "192.168.1.103", Status = "Success" },
        new() { Id = "LOG-00012", Timestamp = DateTime.Now.AddHours(-1), User = "Mrs. Santos", Role = "Teacher", Action = "User Logout", Module = "Authentication", Description = "User logged out from the system", IpAddress = "192.168.1.101", Status = "Success" },
        new() { Id = "LOG-00013", Timestamp = DateTime.Now.AddHours(-2), User = "Admin User", Role = "Administrator", Action = "Delete Record", Module = "Student Record", Description = "Attempted to delete student record without permission", IpAddress = "192.168.1.100", Status = "Failed" },
        new() { Id = "LOG-00014", Timestamp = DateTime.Now.AddHours(-3), User = "Registrar User", Role = "Registrar", Action = "Assign Section", Module = "Enrollment", Description = "Assigned section 'Jupiter' to student ID: 00005", IpAddress = "192.168.1.102", Status = "Success" },
        new() { Id = "LOG-00015", Timestamp = DateTime.Now.AddHours(-4), User = "Admin User", Role = "Administrator", Action = "Create Expense", Module = "Finance", Description = "Created expense record EXP-001 for office supplies", IpAddress = "192.168.1.100", Status = "Success" }
    };

    public class AuditLogEntry
    {
        public string Id { get; set; } = "";
        public DateTime Timestamp { get; set; }
        public string User { get; set; } = "";
        public string Role { get; set; } = "";
        public string Action { get; set; } = "";
        public string Module { get; set; } = "";
        public string Description { get; set; } = "";
        public string IpAddress { get; set; } = "";
        public string Status { get; set; } = ""; // Success, Failed, Warning
    }
}

