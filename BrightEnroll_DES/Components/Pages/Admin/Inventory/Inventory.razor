@page "/inventory"
@layout Components.Layout.MainLayout
@using BrightEnroll_DES.Services.RoleBase
@using BrightEnroll_DES.Components.Pages.Admin.Inventory.InventoryComponents
@inject IAuthorizationService AuthorizationService

<PageTitle>Inventory</PageTitle>

<RoleAuthorizeView RequiredPermission="@Permissions.ViewInventory">

    <div class="min-h-screen bg-gray-100 py-6 px-4">
        <div class="mx-auto max-w-7xl space-y-6">

            <!-- HEADER SECTION -->
            <div class="rounded-lg bg-white border border-gray-200 px-6 py-5">
                <h1 class="text-2xl font-semibold text-gray-800">
                    Inventory & Asset Management
                </h1>
                <p class="mt-1 text-sm text-gray-600">
                    Manage assets, inventory items, assignments, and maintenance records
                </p>
            </div>

            <!-- TABS SECTION -->
            <div class="rounded-lg bg-white border border-gray-200 px-6">
                <nav class="flex space-x-6">
                    <button @onclick="() => activeTab = InventoryTab.Assets"
                            class="@GetTabClass(InventoryTab.Assets)">
                        Asset Management
                    </button>

                    <button @onclick="() => activeTab = InventoryTab.Items"
                            class="@GetTabClass(InventoryTab.Items)">
                        Item Management
                    </button>

                    <button @onclick="() => activeTab = InventoryTab.Assignments"
                            class="@GetTabClass(InventoryTab.Assignments)">
                        Asset Assignments
                    </button>

                    <button @onclick="() => activeTab = InventoryTab.Maintenance"
                            class="@GetTabClass(InventoryTab.Maintenance)">
                        Maintenance Records
                    </button>
                </nav>
            </div>

            <!-- CONTENT SECTION -->
            <div class="rounded-lg bg-white border border-gray-200 p-6">
                @switch (activeTab)
                {
                    case InventoryTab.Assets:
                        <AssetManagement />
                        break;

                    case InventoryTab.Items:
                        <ItemManagement />
                        break;

                    case InventoryTab.Assignments:
                        <AssetAssignments />
                        break;

                    case InventoryTab.Maintenance:
                        <MaintenanceRecords />
                        break;
                }
            </div>

        </div>
    </div>

</RoleAuthorizeView>

@code {
    private enum InventoryTab
    {
        Assets,
        Items,
        Assignments,
        Maintenance
    }

    private InventoryTab activeTab = InventoryTab.Assets;

    private string GetTabClass(InventoryTab tab) =>
        $"whitespace-nowrap border-b-2 px-1 py-4 text-sm font-medium transition " +
        (activeTab == tab
            ? "border-blue-500 text-blue-600"
            : "border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700");
}
